---
title: SpringBoot+Shiro+JWT实现注册登录、邮箱激活
tag: ['SpringBoot','Shiro','笔记']
---

#### 相关地址

[网页端项目地址](https://gitee.com/hlovez/shirobyjwt-vue)

[服务端项目地址](https://gitee.com/hlovez/shirobyjwt)

[DEMO演示地址](https://www.huhailong.vip/webproject/shirobyjwt)



#### 具备功能

1. 注册功能
2. 邮箱激活
3. 用户管理，包括锁定用户，逻辑删除，恢复用户，添加角色等
4. 角色管理
5. 菜单管理
6. 日志功能
7. ……完善中

#### 注册流程

~~~mermaid
graph LR
A(开始注册)-->B(输入账号,密码,注册邮箱)
B==>C(规则校验)
C-.yes.->D(通过校验)
C-.no.->E(校验失败)
E-.重新填写.->B
D-->F(给注册邮箱发送激活邮件)
~~~

上面大概就是注册的基本流程，规则校验包含一下校验

- 用户名是否符合注册格式
- 用户名是否已存在
- 密码是否符合注册格式
- 邮箱是否符合注册格式
- 邮箱是否已经绑定

校验通过后会发送一封激活邮件到注册邮箱，通过点击激活链接进行用户激活，链接有效时间为30分钟（可根据自己需求修改）,在没有激活前，用户状态为未激活，是不能登录系统的。这样的注册流程好处是保证了用户的有效性。

#### 登录流程

~~~mermaid
graph LR
A(开始登录)-->B(输入用户名,密码,验证码)
B-->C(登录认证)
C-.yes.->D(认证通过)
C-.no.->E(认证失败)
C-.未激活.->I(重新发送激活邮件)
E-->F(用户名或密码错误)
E-->G(验证码错误或验证码过期)
F-.重新输入.->B
G-.重新刷新验证码.->B
D-->H(登录成功)
~~~

#### 邮箱激活流程

~~~mermaid
graph LR
A(获取注册邮箱)-->B(根据用户生成token)
B-->C(根据邮件模板发送邮件)
C-->D(点击邮件链接)
D-->E(服务端验证token)
E-.通过验证.->F(激活用户)
E-.验证失败.->G(激活失败)
~~~

#### 忘记密码流程

~~~mermaid
graph
A(用户输入账号)-->B(判断账号)
B-.存在.->C(获取注册邮箱)
B-.不存在.->D(返回提示信息)-.该账号未注册.->A
C-->E(生成token和随机校验码)
E-->F(发送找回密码链接和校验码)
F-->G(点击链接输入新密码和校验码)-->H(找回成功)
~~~

